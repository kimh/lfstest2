version: 2
workflows:
  version: 2
  deploy-site:
    jobs:
    - whatever

jobs:
  whatever:
    environment:
      GIT_LFS_SKIP_SMUDGE: 1

    docker:
    - image: macjustice/git-lfs

    steps:
      - checkout
      - run:
          name: Git LFS (install Git Large File Storage)
          command: |
            mkdir -p ~/.ssh
            ssh-keyscan -H github.com >> ~/.ssh/known_hosts
            ssh git@github.com git-lfs-authenticate "${CIRCLE_PROJECT_USERNAME}/${CIRCLE_PROJECT_REPONAME}" download
            git lfs pull

      #- run:
      #    name: Install Git LFS
      #    command: |
      #      apt-get update
      #      apt-get install -y curl git-lfs openssh-client
      #      curl -s https://packagecloud.io/install/repositories/github/git-lfs/script.deb.sh | bash
      #      git lfs install
      #      mkdir -p ~/.ssh
      #      ssh-keyscan -H github.com >> ~/.ssh/known_hosts
